{% extends 'base.html' %}
{% block style %}
    {{ block.super }}
    <style>
        .profile-header {
            padding: 2rem 0;
            margin-bottom: 2rem;
        }

        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 4px solid #dee2e6;
            display: flex; /* Используем flexbox для центрирования */
            justify-content: center;
            align-items: center;
        }

        .avatar-image {
            width: 90px; /* Задаём новый размер для изображения */
            height: 90px;
        }

        .profile-stats {
            display: flex;
            justify-content: space-around;
            margin: 1rem 0;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }

        .nav-tabs {
            border-bottom: 2px solid #dee2e6;
            margin-bottom: 2rem;
        }

        .nav-tabs .nav-link {
            border: none;
            color: #666;
            font-weight: 500;
            padding: 1rem 1.5rem;
        }

        .nav-tabs .nav-link.active {
            color: #667eea;
            border-bottom: 3px solid #667eea;
            background: none;
        }

        .tab-content {
            padding: 1rem 0;
        }

        .action-item {
            padding: 1rem;
            border-left: 3px solid #667eea;
            margin-bottom: 1rem;
            background: #f8f9fa;
            border-radius: 0 5px 5px 0;
        }

        .action-date {
            color: #666;
            font-size: 0.9rem;
        }

        .snippet-card {
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            transition: transform 0.2s;
        }

        .snippet-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .edit-profile-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
        }
    </style>
{% endblock %}

{% block content %}

    <div class="container">
        <div class="row">
            <div class="col">
                <div class="profile-header">
                    <div class="row align-items-center">
                        <div class="col-md-3 text-center">
                            <div class="profile-avatar">
                                <img alt="Аватар" class="avatar-image"
                                     src="{{ request.user.profile.get_avatar_url }}">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h1>@{{ request.user.username }}</h1>
                            <p class="mb-2">Дата регистрации: {{ request.user.date_joined }}</p>
                        </div>
                        <div class="col-md-3">

                            <a href="/profile/edit/" class="btn btn-outline-primary edit-profile-btn">
                                <i class="fas fa-edit"></i> Редактировать
                            </a>

                        </div>
                    </div>
                </div>
            </div>
        </div>

        <ul class="nav nav-tabs" id="profileTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="info-tab" data-bs-toggle="tab" data-bs-target="#info" type="button"
                        role="tab">
                    <i class="fas fa-user"></i> Информация
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="stats-tab" data-bs-toggle="tab" data-bs-target="#stats" type="button"
                        role="tab">
                    <i class="fas fa-chart-bar"></i> Статистика
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="history-tab" data-bs-toggle="tab" data-bs-target="#history" type="button"
                        role="tab">
                    <i class="fas fa-history"></i> История
                </button>
            </li>
        </ul>

        <div class="tab-content" id="profileTabContent">
            <!-- Вкладка Информация -->
            <div class="tab-pane fade show active" id="info" role="tabpanel">
                <div class="row">
                    <div class="col-md-6">
                        <h4>Основная информация</h4>
                        <table class="table">
                            <tr>
                                <td><strong>Имя пользователя:</strong></td>
                                <td>{{ request.user.username }}</td>
                            </tr>
                            <tr>
                                <td><strong>Имя:</strong></td>
                                <td>{{ request.user.first_name | default:"Не указано"}}</td>
                            </tr>
                            <tr>
                                <td><strong>Фамилия:</strong></td>
                                <td>{{ request.user.last_name | default:"Не указано" }}</td>
                            </tr>
                            <tr>
                                <td><strong>Email:</strong></td>
                                <td>{{ request.user.email }}</td>
                            </tr>
                            <tr>
                                <td><strong>Дата регистрации:</strong></td>
                                <td>{{ request.user.date_joined|date:"d.m.Y H:i" }}</td>
                            </tr>
                            <tr>
                                <td><strong>Последний вход:</strong></td>
                                <td>{{ request.user.last_login|date:"d.m.Y H:i" }}</td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <h4>Дополнительная информация</h4>

                        <p><strong>О себе:</strong><br>{{ request.user.profile.bio }}</p>


                        <p><strong>Веб-сайт:</strong><br>
                            <a href="" target="_blank">{{ request.user.profile.website }}</a>
                        </p>


                        <p><strong>Смена пароля:</strong><br>
                            <a href="/password/change/" class="btn btn-warning btn-sm">
                                <i class="fas fa-key"></i> Изменить пароль
                            </a>
                        </p>

                    </div>
                </div>
            </div>

            <!-- Вкладка Статистика -->
            <div class="tab-pane fade" id="stats" role="tabpanel">
                <div class="row">
                    <div class="col-md-6">
                        <h4>Общая статистика</h4>
                        <div class="card">
                            <div class="card-body">
                                <div class="row text-center">
                                    <div class="col-6">
                                        <h3 class="text-primary">{{ statistic.total_snippets }}</h3>
                                        <p>Всего сниппетов</p>
                                    </div>
                                    <div class="col-6">
                                        <h3 class="text-success">{{ statistic.avg_views }}</h3>
                                        <p>Сред. просмотров</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="col-md-6">
                        <h4>Топ сниппетов по просмотрам</h4>
                        {% for snippet in top_five %}
                        <div class="snippet-card">
                            <h6><a href="/snippet/{{ snippet.id }}">{{ snippet.name }}</a></h6>
                            <p class="mb-1">
                                <span class="badge bg-primary">{{ snippet.lang }}</span>
                                <span class="text-muted">{{ snippet.creation_date|date:"d.m.Y" }}</span>
                            </p>
                            <p class="mb-0">
                                <i class="fas fa-eye"></i> {{ snippet.views_count }} просмотров
                            </p>
                        </div>
                        {% endfor %}

                    </div>
                </div>
            </div>

            <!-- Вкладка История -->
            <div class="tab-pane fade" id="history" role="tabpanel">
                <h4>История действий</h4>


                <div class="action-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="mb-1">Прокомментировал сниппет &quot;C++: Function Example&quot;</p>
                            <small class="action-date">08.08.2025 09:35</small>
                        </div>

                        <span class="badge bg-info">Комментарий</span>

                    </div>
                </div>

                <div class="action-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="mb-1">Прокомментировал сниппет &quot;C++: Console Output&quot;</p>
                            <small class="action-date">08.08.2025 08:09</small>
                        </div>

                        <span class="badge bg-info">Комментарий</span>

                    </div>
                </div>

                <div class="action-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="mb-1">Прокомментировал сниппет &quot;C++: Basic Loop&quot;</p>
                            <small class="action-date">08.08.2025 08:09</small>
                        </div>

                        <span class="badge bg-info">Комментарий</span>

                    </div>
                </div>

                <div class="action-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="mb-1">Создал сниппет &quot;demo snippet&quot;</p>
                            <small class="action-date">10.07.2025 16:45</small>
                        </div>

                        <span class="badge bg-success">Сниппет</span>

                    </div>
                </div>

                <div class="action-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="mb-1">Создал сниппет &quot;Тестовое название&quot;</p>
                            <small class="action-date">10.07.2025 16:44</small>
                        </div>

                        <span class="badge bg-success">Сниппет</span>

                    </div>
                </div>

                <div class="action-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="mb-1">Создал сниппет &quot;Test snippet&quot;</p>
                            <small class="action-date">10.07.2025 16:32</small>
                        </div>

                        <span class="badge bg-success">Сниппет</span>

                    </div>
                </div>

                <div class="action-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="mb-1">Прокомментировал сниппет &quot;Python: Decorator Example&quot;</p>
                            <small class="action-date">01.07.2025 10:30</small>
                        </div>

                        <span class="badge bg-info">Комментарий</span>

                    </div>
                </div>

                <div class="action-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="mb-1">Прокомментировал сниппет &quot;Python: Exception Handling&quot;</p>
                            <small class="action-date">01.07.2025 10:05</small>
                        </div>

                        <span class="badge bg-info">Комментарий</span>

                    </div>
                </div>

                <div class="action-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="mb-1">Прокомментировал сниппет &quot;Python: Function with Args&quot;</p>
                            <small class="action-date">01.07.2025 09:45</small>
                        </div>

                        <span class="badge bg-info">Комментарий</span>

                    </div>
                </div>

                <div class="action-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="mb-1">Прокомментировал сниппет &quot;Python: List Comprehension&quot;</p>
                            <small class="action-date">01.07.2025 09:15</small>
                        </div>

                        <span class="badge bg-info">Комментарий</span>

                    </div>
                </div>

                <div class="action-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="mb-1">Прокомментировал сниппет &quot;Python: Hello World&quot;</p>
                            <small class="action-date">01.07.2025 09:00</small>
                        </div>

                        <span class="badge bg-info">Комментарий</span>

                    </div>
                </div>

                <div class="action-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="mb-1">Создал сниппет &quot;Python: Testing Utility&quot;</p>
                            <small class="action-date">30.06.2025 11:10</small>
                        </div>

                        <span class="badge bg-success">Сниппет</span>

                    </div>
                </div>

                <div class="action-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="mb-1">Создал сниппет &quot;Python: Configuration Settings&quot;</p>
                            <small class="action-date">30.06.2025 11:05</small>
                        </div>

                        <span class="badge bg-success">Сниппет</span>

                    </div>
                </div>

                <div class="action-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="mb-1">Создал сниппет &quot;Python: Internal Data Processing&quot;</p>
                            <small class="action-date">30.06.2025 11:00</small>
                        </div>

                        <span class="badge bg-success">Сниппет</span>

                    </div>
                </div>

                <div class="action-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="mb-1">Создал сниппет &quot;Python: Secret Key Generator&quot;</p>
                            <small class="action-date">30.06.2025 10:55</small>
                        </div>

                        <span class="badge bg-success">Сниппет</span>

                    </div>
                </div>

                <div class="action-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="mb-1">Создал сниппет &quot;Python: Private Function&quot;</p>
                            <small class="action-date">30.06.2025 10:50</small>
                        </div>

                        <span class="badge bg-success">Сниппет</span>

                    </div>
                </div>

                <div class="action-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="mb-1">Создал сниппет &quot;Python: Regular Expression&quot;</p>
                            <small class="action-date">30.06.2025 10:45</small>
                        </div>

                        <span class="badge bg-success">Сниппет</span>

                    </div>
                </div>

                <div class="action-item">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="mb-1">Создал сниппет &quot;Python: Decorator Example&quot;</p>
                            <small class="action-date">30.06.2025 10:40</small>
                        </div>

                        <span class="badge bg-success">Сниппет</span>

                    </div>
                </div>


            </div>
        </div>
    </div>



{% endblock %}